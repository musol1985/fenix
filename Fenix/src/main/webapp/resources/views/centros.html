<div class="container" data-ng-controller="tablaCentros as centrosCtr">


<div class="card m-b-0 lista" id="messages-main">

        <div class="ms-menu lista" data-ng-class="{ 'toggled': mactrl.lvMenuStat }">
            <div class="card-header ch-alt clearfix" >
            	<h2>Centros<small>Lista de centros</small></h2>


				<ul class="lv-actions actions">
                    	<li>
                            <a href="" ng-click="refrescar()">
                                <i class="zmdi zmdi-refresh"></i>
                            </a>
                        </li>
                </ul>
                
                <button class="btn bgm-red btn-float waves-effect" ng-click="nuevo()"><i class="zmdi zmdi-plus"></i></button>
            </div>

			<uilista datos="datos" on-seleccionar="seleccionarCentro(item)">
					<listaitem uilistaitem 
								color="$parent.item.color" 
								titulo="$parent.item.nombre"
								descripcion="$parent.item.correoAdmin"
								sub-descripcion="$parent.item.ubicacion.poblacion"/>						
			         
					<ul class="lv-actions actions">
                    	<li>
                            <a href="" ng-click="eliminar($parent.item)">
                                <i class="zmdi zmdi-delete"></i>
                            </a>
                        </li>
	                </ul>
			</uilista>

        </div>
 
        <div class="ms-body" data-ng-controller="usuarios as usuariosCtr">
            <div class="listview lv-message">
                <div class="card-header ch-alt clearfix">
                    <div id="ms-menu-trigger"  data-ng-class="{ 'open': mactrl.lvMenuStat }" data-ng-click="mactrl.lvMenuStat = (mactrl.lvMenuStat===true ? false : true )">
                        <div class="line-wrap">
                            <div class="line top"></div>
                            <div class="line center"></div>
                            <div class="line bottom"></div>
                        </div>
                    </div>

                    <div class="lvh-label">
                        Usuarios
                    </div>

                    <ul class="lv-actions actions">
                    	<li>
                            <a href="" ng-click="refrescar(usuariosCtr)">
                                <i class="zmdi zmdi-refresh"></i>
                            </a>
                        </li>                     
                    </ul>
                    
                    
<script type="text/ng-template" id="myModalContent.html">
                <div class="modal-header">
                    <h4 class="modal-title">Nuevo centro</h4>
                </div>
                <div class="modal-body">

				<form name="myForm" class="form-horizontal" novalidate>

                      <div class="row">
                          <div class="form-group col-md-12" ng-class="{ 'has-error' : myForm.nombre.$invalid  && !myForm.nombre.$pristine, 'has-success': myForm.nombre.$invalid && !myForm.nombre.$pristine}">
                              <label class="col-md-3 control-lable" for="nombre">Nombre *</label>
                              <div class="col-md-7">
                                  <input type="text" ng-model="modalContent.nuevoCentro.centro.nombre" id="nombre" name="nombre" class="username form-control input-sm" placeholder="Introduce el nombre" required ng-minlength="3"/>
								   <p ng-show="myForm.nombre.$invalid && !myForm.nombre.$pristine" class="help-block">
									Este campo es obligatorio
							      </p>
                              </div>
                          </div>
                      </div>
 
                      <div class="row">
                          <div class="form-group col-md-12" ng-class="{ 'has-error' : myForm.correo.$invalid && !myForm.correo.$pristine, 'has-success': myForm.correo.$invalid && !myForm.correo.$pristine}">
                              <label class="col-md-3 control-lable" for="correo">Correo Admin*</label>
                              <div class="col-md-5">
                                  <input type="email" ng-model="modalContent.nuevoCentro.centro.correoAdmin" id="correo" name="correo" class="email form-control input-sm" placeholder="Introduce el e-mail" required/>
								  <p ng-show="myForm.correo.$invalid && !myForm.correo.$pristine" class="help-block">
									<span ng-show="myForm.correo.$error.required">Este campo es obligatorio</span>
									<span ng-show="myForm.correo.$error.email">Debes escribir un correo valido</span>
							      </p>
                              </div>
                          </div>
                      </div>

					  <div class="row">
                          <div class="form-group col-md-12" ng-class="{ 'has-error' : myForm.nombreAdmin.$invalid  && !myForm.nombreAdmin.$pristine, 'has-success': myForm.nombreAdmin.$invalid && !myForm.nombreAdmin.$pristine}">
                              <label class="col-md-3 control-lable" for="nombreAdmin">Nombre Admin*</label>
                              <div class="col-md-7">
                                  <input type="text" ng-model="modalContent.nuevoCentro.nombreAdmin" id="nombreAdmin" name="nombreAdmin" class="username form-control input-sm" placeholder="Introduce el nombre" required ng-minlength="3"/>
								   <p ng-show="myForm.nombreAdmin.$invalid && !myForm.nombre.$pristine" class="help-block">
									Este campo es obligatorio
							      </p>
                              </div>
                          </div>
                      </div>

 				      <div class="row">
                          <div class="form-group col-md-12" ng-class="{ 'has-error' : myForm.correo.$invalid && !myForm.correo.$pristine, 'has-success': myForm.correo.$invalid && !myForm.correo.$pristine}">
                              <label class="col-md-3 control-lable" for="ubicacion">Ubicación*</label>
                              <div class="col-md-7">                                  
							      <input type="text" name="ubicacion" ng-model="asyncSelected" placeholder="Dirección" typeahead-wait-ms="150" typeahead-on-select="modalContent.setUbicacion($item, $model)" uib-typeahead="address.formatted_address for address in modalContent.getUbicacion($viewValue)" typeahead-loading="Cargando" class="form-control">
                              </div>
                          </div>
                      </div>   
						<div class="row">
                          <div class="form-group col-md-12" ng-class="{ 'has-error' : myForm.color.$invalid && !myForm.correo.$pristine, 'has-success': myForm.correo.$invalid && !myForm.correo.$pristine}">
                              <label class="col-md-3 control-lable" for="color">Color</label>
                              <div class="col-md-7">                                  								
							      <input type="hidden" name="color" ng-model="modalContent.nuevoCentro.centro.color" class="form-control">

								  <ul class="skin-switch lista-colores" >
								      <li ng-repeat="r in modalContent.getColores()" class="lista-colores ss-skin bgm-{{ r }}" data-ng-click="modalContent.setColor(r)"/>
                                  </ul>
                              </div>
                          </div>
                      </div>  

				<div class="row">
					<label class="col-md-2 control-lable" for="tipo">Tipo*</label>
					<div class="col-md-7">                                  
						<select chosen class="w-100" ng-model="modalContent.nuevoCentro.centro.tipo" data-placeholder="Tipoj de centro" name="tipo">
								<option value="0">Belleza y cuidado personal</option>
								<option value="1">Sanidad</option>
						</select>
					</div>
				</div>

					<div class="modal-footer">
						<button class="btn bgm-blue btn-lg" ng-click="modalContent.guardar()" ng-disabled="myForm.$invalid">
							Guardar
						</button> 
                    	<button class="btn bgm-red btn-lg" ng-click="cancel()">Cancelar</button>
                	</div>
                  </form>

                </div>
</script>
                </div>

                <div ng-show="centro.sId=='-1'" class="lv-body"">
                	<div class="centro m-t-30">
                		<h1>Selecciona un centro</h1>
                		<div>Selecciona un centro de la izquierda para ver sus usuarios</div>
                	</div>
                    
                </div>
                
                <div ng-show="centro.sId!='-1'" class="table-responsive">
                		<table  ng-table="tabla" ng-table-get-datos="getDatosByCentro(params, onComplete)" ng-table-model="rows" ng-Table-Ref="usuariosCtr" pagsize="10" class="table table-striped table-vmiddle">
				             <tr ng-repeat="w in rows"  >
		                        <td data-title="'Nombre'">
		                            {{ w.nombre }}
		                        </td>
		                        <td data-title="'Correo'">
		                            {{ w.correo }}
		                        </td>
		                        <td data-title="'Admin'">
				                      <div class="checkbox pull-left">
				                       <label>
				                           <input type="checkbox" data-ng-checked="w.admin" value="" ng-disabled="true">
				                           <i class="input-helper"></i>
				                       </label>
				                   </div>	             
				                </td> 
				                <td data-title="'Pendiente'">
				                      <div class="checkbox pull-left">
				                       <label>
				                           <input type="checkbox" data-ng-checked="w.pendiente" value=""  ng-disabled="true">
				                           <i class="input-helper"></i>
				                       </label>
				                   </div>	             
				                </td>
		                    </tr>
				         </table> 
		            </div>
                
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
